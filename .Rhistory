MOVID_2020 <- read_dta(url("https://github.com/learn-R/examen-Rosario-Astorga/raw/main/input/data/MOVID-IMPACT.dta"))
pacman::p_load(tidyverse, #Universo de paquetes
sjmisc, #Para explorar datos
dplyr, #Para manipular datos
haven, #cargar y exportar bases de datos en formatos .sav y .dta
car) #Para recodificar manteniendo las etiquetas
MOVID_2020 <- read_dta(url("https://github.com/learn-R/examen-Rosario-Astorga/raw/main/input/data/MOVID-IMPACT.dta"))
View(MOVID_2020)
pacman::p_load(tidyverse, #Universo de paquetes
sjmisc, #Para explorar datos
dplyr, #Para manipular datos
haven, #cargar y exportar bases de datos en formatos .sav y .dta
car) #Para recodificar manteniendo las etiquetas
movid_proc <- select(MOVID_2020, factor_expansion, id_encuesta, entrevistado, estado_sm = c2_3, variacion_td = f2, variacion_cuidados = f2,  trabajo_productivo = g1, ingresos = g48, sexo edad)
movid_proc <- select(MOVID_2020, factor_expansion, id_encuesta, entrevistado, estado_sm = c2_3, variacion_td = f2, variacion_cuidados = f2,  trabajo_productivo = g1, ingresos = g48, sexo, edad)
View(movid_proc)
movid_proc <- movid_proc
movid_proc[movid_proc == "" | movid_proc== " "] <- NA  # Replace blank & space by NA
movid_proc <- movid_proc
movid_proc[movid_proc == "" | movid _proc== " "] <- NA  # Replace blank & space by NA
movid_proc
frq(MOVID_2020$c2_3)
descr(MOVID_2020$g48)
descr(MOVID_2020$g48)
frq(MOVID_2020$g48)
sjlabelled::
?sjlabelled
frq(MOVID_2020$c2_3)
frq(MOVID_2020$f2)
frq(MOVID_2020$g1)
frq(MOVID_2020$edad)
frq(MOVID_2020$sexo)
frq(MOVID_2020$g48)
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA")))
lang::last_error()
rlang::last_error()
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2:4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1:3)='Bajo'; c(4,5) = 'Medio'; c(6:8) = 'Alto'; c(98,99)=NA")))
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2:4)=1;1 = 0; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1:3)='Bajo'; c(4,5) = 'Medio'; c(6:8) = 'Alto'; c(98,99)=NA")))
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2:4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1:3)='Bajo'; c(4,5) = 'Medio'; c(6:8) = 'Alto'; c(98,99)=NA")))
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2:4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA"), as.factor = T),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1:3)='Bajo'; c(4,5) = 'Medio'; c(6:8) = 'Alto'; c(98,99)=NA")))
movid_proc <- movid_proc %>%
mutate_if(is.labelled, ~(forcats::as_factor(.))) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2:4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA"), as.factor = T),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1:3)='Bajo'; c(4,5) = 'Medio'; c(6:8) = 'Alto'; c(98,99)=NA")))
movid_proc <- movid_proc %>%
mutate_if(is.labelled, ~(forcats::as_factor(.))) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2:4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1:3)='Bajo'; c(4,5) = 'Medio'; c(6:8) = 'Alto'; c(98,99)=NA")))
movid_proc <- movid_proc %>%
mutate_if(is.labelled, ~(forcats::as_factor(.))) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1:3)='Bajo'; c(4,5) = 'Medio'; c(6:8) = 'Alto'; c(98,99)=NA")))
movid_proc <- movid_proc %>%
mutate_all(~ as.numeric(.)) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1:3)='Bajo'; c(4,5) = 'Medio'; c(6:8) = 'Alto'; c(98,99)=NA")))
movid_proc <- movid_proc %>%
mutate_all(~ as.numeric(.)) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1:3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA")))
movid_proc <- movid_proc %>%
mutate_all(~ as.numeric(.)) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA")))
rename("variacion_cuidados”=  f2) %>%
set_label(x = movid_proc$variacion_cuidados, label = Variacion trabajo de cuidados") %>%
set_labels(movid_proc$variacion_cuidados,
labels=c( "Se mantuvo/disminuyó"=0,
"Aumentó"=1, as.numeric=T))
?sjlabelled
pacman::p_load(tidyverse, #Universo de paquetes
sjmisc, #Para explorar datos
dplyr, #Para manipular datos
sjlabelled, #Para trabajar con datos etiquetados
haven, #cargar y exportar bases de datos en formatos .sav y .dta
car) #Para recodificar manteniendo las etiquetas
rename("variacion_cuidados”=  f2) %>%
set_label(x = movid_proc$variacion_cuidados, label = Variacion trabajo de cuidados") %>%
set_labels(movid_proc$variacion_cuidados,
labels=c( "Se mantuvo/disminuyó"=0,
"Aumentó"=1, as.numeric=T))
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
movid_proc <- movid_proc %>%
mutate_all(~ as.numeric(.)) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
rename("variacion_cuidados”=  f2) %>%
set_label(x = movid_proc$variacion_cuidados, label = Variacion trabajo de cuidados") %>%
set_labels(movid_proc$variacion_cuidados,
labels=c( "Se mantuvo/disminuyó"=0,
"Aumentó"=1, as.numeric=T))
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
movid_proc <- movid_proc %>%
mutate_all(~ as.numeric(.)) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
movid_proc <- movid_proc %>%
mutate_all(~ as.numeric(.)) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
View(movid_proc)
pacman::p_load(tidyverse, #Universo de paquetes
sjmisc, #Para explorar datos
dplyr, #Para manipular datos
sjlabelled, #Para trabajar con datos etiquetados
haven, #cargar y exportar bases de datos en formatos .sav y .dta
car) #Para recodificar manteniendo las etiquetas
movid_proc <- movid_proc %>%
mutate_all(~ as.numeric(.)) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
View(movid_proc)
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)='Si se ha sentido deprimido';1 = 'No se ha sentido deprimido'; c(8,9)=NA")),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
rename("variacion_cuidados”=  f2) %>%
set_label(x = movid_proc$variacion_cuidados, label = Variacion trabajo de cuidados") %>%
set_labels(movid_proc$variacion_cuidados,
labels=c( "Se mantuvo/disminuyó"=0,
"Aumentó"=1, as.numeric=T))
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)=1;1 =0; c(8,9)=NA"), as.factor = T, levels = c(0, 1)),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
pacman::p_load(tidyverse, #Universo de paquetes
sjmisc, #Para explorar datos
dplyr, #Para manipular datos
magrittr
sjlabelled, #Para trabajar con datos etiquetados
haven, #cargar y exportar bases de datos en formatos .sav y .dta
car) #Para recodificar manteniendo las etiquetas
pacman::p_load(tidyverse, #Universo de paquetes
sjmisc, #Para explorar datos
dplyr, #Para manipular datos
sjlabelled, #Para trabajar con datos etiquetados
haven, #cargar y exportar bases de datos en formatos .sav y .dta
car) #Para recodificar manteniendo las etiquetas
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)=1;1 =0; c(8,9)=NA"), as.factor = T, levels = c(0, 1)),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
movid_proc <- movid_proc %>%
mutate(estado_sm = case_when(estado_sm %in% c(2,3,4) ~ 1,
estado_sm %in% c(1) ~ 0, TRUE ~ NA_real_))
movid_proc <- movid_proc %>%
mutate(estado_sm = case_when(estado_sm %in% c(2,3,4) ~ 1,
estado_sm %in% c(1) ~ 0, TRUE ~ NA_real_))
View(movid_proc)
movid_proc <- movid_proc %>%
mutate_if(is.labelled, ~(forcats::as_factor(.)))  %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)=1;1 =0; c(8,9)=NA"), as.factor = T, levels = c(0, 1)),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
View(movid_proc)
movid_proc <- movid_proc %>%
mutate_all(~ as.numeric(.))  %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(2,3,4)=1;1 =0; c(8,9)=NA"), as.factor = T, levels = c(0, 1)),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
frq(MOVID_2020$c2_3)
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c('Varios días', 'Más de la mitad de los días', 'Casi todos los días')=1; c('Nunca')=0; c(8,9)=NA"), as.factor = T, levels = c(0, 1)),
sexo = car::recode(.$sexo, c('1="Hombre";2="Mujer"'), as.factor = T),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
View(movid_proc)
class(MOVID_2020$c2_3)
class(MOVID_2020$f2)
class(MOVID_2020$g1)
class(MOVID_2020$edad)
class(MOVID_2020$sexo)
class(MOVID_2020$g48)
frq(MOVID_2020$c2_3)
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(1)=0;c(2,3,4)=1; c(8,9)=NA"), as.factor = T, levels = c(0, 1)),
sexo = car::recode(.$sexo, c("'Hombre' = 0; 'Mujer' = 1"), as.factor = T,  levels = c(0, 1)),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo';c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
View(movid_proc)
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("1=0;c(2,3,4)=1; c(8,9)=NA"), as.factor = T, levels = c(0, 1)),
sexo = car::recode(.$sexo, c("'Hombre' = 0; 'Mujer' = 1"), as.factor = T,  levels = c(0, 1)),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"), levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; c('Ha subido. ¿Cuántas horas diarias ha subido?')=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo';c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"))) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
frq(MOVID_2020$g48)
pacman::p_load(tidyverse, #Universo de paquetes
sjmisc, #Para explorar datos
dplyr, #Para manipular datos
sjlabelled, #Para trabajar con datos etiquetados
haven, #cargar y exportar bases de datos en formatos .sav y .dta
car) #Para recodificar manteniendo las etiquetas
frq(MOVID_2020$g48)
movid_proc <- movid_proc %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("1=0;c(2,3,4)=1; c(8,9)=NA"), as.factor = T, levels = c(0, 1)),
sexo = car::recode(.$sexo, c("'Hombre' = 0; 'Mujer' = 1"), as.factor = T,  levels = c(0, 1)),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"),
as.factor = T, levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; 'Ha subido. ¿Cuántas horas diarias ha subido?'=1; c('No sabe', 'No responde')= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c('Ha bajado. ¿Cuántas horas diarias ha bajado?','Se ha mantenido igual')=0; 'Ha subido. ¿Cuántas horas diarias ha subido?'=1; c('No sabe', 'No responde')= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo';c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"),  as.factor = T)) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
View(movid_proc)
class(MOVID_2020$sexo)
MOVID_2020 <- read_dta(url("https://github.com/learn-R/examen-Rosario-Astorga/raw/main/input/data/MOVID-IMPACT.dta"))
pacman::p_load(tidyverse, #Universo de paquetes
sjmisc, #Para explorar datos
dplyr, #Para manipular datos
sjlabelled, #Para trabajar con datos etiquetados
haven, #cargar y exportar bases de datos en formatos .sav y .dta
car) #Para recodificar manteniendo las etiquetas
movid <- select(MOVID_2020, factor_expansion, id_encuesta, entrevistado, estado_sm = c2_3, variacion_td = f2,
variacion_cuidados = f2, trabajo_productivo = g1, ingresos = g48, sexo, edad)
movid_proc <- movid %>% mutate_at(vars(sexo, variacion_td, variacion_cuidados, ingresos), funs(as.numeric(.))) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(1)=0; c(2,3,4)=1; c(8,9)=NA"), as.factor = T, levels = c(0, 1)),
sexo = car::recode(.$sexo, c("1 = 0; 2 = 1"), as.factor = T,  levels = c(0, 1)),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"),
as.factor = T, levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c(1,2)=0; 3=1; c(8,9)= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c(1,2)=0; 3=1; c(8,9)= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"),  as.factor = T)) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
View(movid_proc)
movid_proc <- movid %>% mutate_at(vars(sexo, variacion_td, variacion_cuidados, ingresos), funs(as.numeric(.))) %>%
mutate(estado_sm = car::recode(.$estado_sm, recodes = c("c(1)=0; c(2,3,4)=1; c(8,9)=NA"), as.factor = T, levels = c(0, 1)),
sexo = car::recode(.$sexo, c("1 = 'hombre'; 2 = 'mujer'"), as.factor = T,  levels = c('hombre', 'mujer')),
edad = car::recode(.$edad, recodes = c("18:39='Joven';40:60='Adulto'; 61:hi='Adulto mayor'"),
as.factor = T, levels = c("Joven", "Adulto", "Adulto mayor")),
variacion_td = car::recode(.$variacion_td, recodes = "c(1,2)=0; 3=1; c(8,9)= NA"),
variacion_cuidados = car::recode(.$variacion_cuidados, recodes = "c(1,2)=0; 3=1; c(8,9)= NA"),
ingresos = car::recode(.$ingresos, recodes = c("c(1,2,3)='Bajo'; c(4,5) = 'Medio'; c(6,7,8) = 'Alto'; c(98,99)=NA"),  as.factor = T)) %>%
mutate_at(vars(edad, estado_sm, sexo, variacion_td, ingresos, trabajo_productivo, variacion_cuidados), funs(forcats::as_factor(.)))#Transformo la variable edad, trabaja y riesgo_factor en un factor
head(movid_proc)#visualizamos el único set de datos movid_proc para revisar que todo esté en orden antes de guardar y exportar
saveRDS(MOVID_proc, file = "output/datos/datos_proc.rds") #Guardamos este único set de datos en datos_proc.rds con los datos procesados
saveRDS(movid_proc, file = "output/datos/datos_proc.rds") #Guardamos este único set de datos en datos_proc.rds con los datos procesados
knitr::opts_chunk$set(echo = F, warning = F, message = F)
Sys.setlocale("LC_CTYPE", "spanish")
options(OutDec= ",", digits = 3)
pacman::p_load(dplyr, #Para manipular datos
tidyverse, #Universo de paquetes
magrittr, #Para utilizar el operador pipe
srvyr, #Para trabajar con muestras complejas
survey,#para estimar los modelos con peso muestral
rmdformats, #Proporciona varios formatos de salida HTML de estilos únicos y atractivos
remotes, #Para instalar texreg desde GitHub
texreg, #Para crear tablas en formato publicable
sjPlot) #Para visualizar los datos
datos_proc <- readRDS("../output/datos/datos_proc.rds")
movid_objeto <- datos_proc %>% #Creamos un nuevo objeto llamado movid_objeto con la información de datos_proc
as_survey_design(ids = 1, #Aplicamos diseño muestral, especificando los ids a partir de 1 (entrevistado seleccionado),
weights = factor_expansion) #y el ponderador con factor de expansión
modelo0 <- glm(variacion_cuidados ~ 1, family = binomial(link = "logit"), data = datos_proc)
modelo3 <- glm(variacion_cuidados ~ sexo, family = binomial(link = "logit"), data = datos_proc)
modelo4 <- glm(variacion_cuidados ~ estado_sm, family = binomial(link = "logit"), data = datos_proc)
modelo5 <- glm(variacion_cuidados ~ sexo + estado_sm, family = binomial(link = "logit"), data = datos_proc)
modelo6 <- glm(variacion_cuidados ~ sexo + edad + trabajo_productivo + estado_sm + ingresos + variacion_td, family = binomial(link = "logit"), data = datos_proc)
modelo6survey <- svyglm(variacion_cuidados ~ sexo + edad + trabajo_productivo + estado_sm + ingresos + variacion_td, family = binomial(link = "logit"), design = movid_objeto, data = datos_proc)
sjPlot::tab_model(list(modelo0,modelo3,modelo4,modelo5,modelo6),
string.intercept = "(Intercepto)",
string.pred = "Predictores",
string.est = "Estimación (OR)",
p.style = "stars",
collapse.ci = T,
digits = 3,
dv.labels = c("Modelo 1", "Modelo 3", "Modelo 4", "Modelo 5", "Modelo 6"),
transform = "exp",
show.reflvl = TRUE,
encoding = "UTF-8",
lang = "es")
